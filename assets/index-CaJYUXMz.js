(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const t of n)if(t.type==="childList")for(const r of t.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function c(n){const t={};return n.integrity&&(t.integrity=n.integrity),n.referrerPolicy&&(t.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?t.credentials="include":n.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function o(n){if(n.ep)return;n.ep=!0;const t=c(n);fetch(n.href,t)}})();function k(e,i){return`https://api.weatherapi.com/v1/search.json?key=${e}&q=${i}`}function T(e,i){return`https://api.weatherapi.com/v1/current.json?key=${e}&q=${i}&aqi=no`}function y(e){return fetch(e).then(i=>{if(!i.ok)throw new Error(`HTTP ${i.status}`);return i.json()})}const p={CELSIUS:"celsius",FAHRENHEIT:"fahrenheit"},d={MM:"mm",IN:"in"},m={KPH:"kph",MPH:"mph"},g={KM:"km",MILES:"miles"};function U(){let e=null,i=p.CELSIUS,c=d.MM,o=m.KPH,n=g.KM;return{setData(t){e=t},toggleTemperature(){i=i===p.CELSIUS?p.FAHRENHEIT:p.CELSIUS},getTemperature(){if(!e)return null;const t=i===p.CELSIUS;return{temperature:t?e.tempC:e.tempF,feelsLike:t?e.feelsLikeC:e.feelsLikeF,unit:t?"°C":"°F"}},togglePrecipitation(){c=c===d.MM?d.IN:d.MM},getPrecipitation(){if(!e)return null;const t=c===d.MM;return{value:t?e.precipMm:e.precipIn,unit:t?"mm":"in"}},toggleWind(){o=o===m.KPH?m.MPH:m.KPH},getWind(){if(!e)return null;const t=o===m.KPH;return{value:t?e.windKph:e.windMph,unit:t?"km/h":"mph"}},toggleVisibility(){n=n===g.KM?g.MILES:g.KM},getVisibility(){if(!e)return null;const t=n===g.KM;return{value:t?e.visibilityKm:e.visibilityMiles,unit:t?"km":"mi"}},isEmpty(){return!e},getFormatted(){if(!e)return null;const t=this.getTemperature(),r=this.getPrecipitation(),l=this.getWind(),a=this.getVisibility();return{conditionIcon:e.conditionIcon,temperature:t.temperature,tempUnit:t.unit,conditionText:e.conditionText,location:e.location,feelsLike:t.feelsLike,precipitation:r.value,precipUnit:r.unit,windSpeed:l.value,windUnit:l.unit,humidity:e.humidity,uv:e.uv,visibility:a.value,visibilityUnit:a.unit,cloudCover:e.cloudCover}}}}function P(e){const{location:{name:i,region:c,country:o},current:{temp_c:n,temp_f:t,feelslike_c:r,feelslike_f:l,precip_mm:a,precip_in:C,wind_mph:I,wind_kph:S,humidity:L,uv:w,vis_km:$,vis_miles:b,cloud:M,condition:{icon:x,text:E}}}=e;return{conditionIcon:x,conditionText:E,tempC:n,tempF:t,feelsLikeC:r,feelsLikeF:l,precipMm:a,precipIn:C,windMph:I,windKph:S,humidity:L,uv:w,visibilityKm:$,visibilityMiles:b,cloudCover:M,location:`${i}, ${c} from ${o}`}}function q(e){const i=document.createElement("button");i.dataset.id=e.id,i.dataset.url=e.url,i.className="suggestion-item";const c=document.createElement("div");c.className="suggestion-title",c.textContent=`${e.name}, ${e.region}`,i.appendChild(c);const o=document.createElement("div");return o.className=" suggestion-subtitle",o.textContent=`${e.country}`,i.appendChild(o),i}function K(e){const i=document.createElement("img");return i.src=e,i.alt="Weather ICON",i.className="weather-icon",i}const s={weatherIconContainer:document.querySelector("#weather-icon-container"),temperature:document.querySelector("#temperature"),conditionText:document.querySelector("#condition"),location:document.querySelector("#location"),feelsLike:document.querySelector("#feels-like"),precipitation:document.querySelector("#precipitation"),windSpeed:document.querySelector("#wind-speed"),humidity:document.querySelector("#humidity"),uv:document.querySelector("#uv-index"),visibility:document.querySelector("#visibility"),cloudCover:document.querySelector("#cloud-cover")};function N(e){const i=K(e.conditionIcon);s.weatherIconContainer.replaceChildren(),s.weatherIconContainer.appendChild(i),s.temperature.textContent=`${e.temperature}${e.tempUnit}`,s.conditionText.textContent=e.conditionText,s.location.textContent=e.location,s.feelsLike.textContent=`${e.feelsLike}${e.tempUnit}`,s.precipitation.textContent=`${e.precipitation} ${e.precipUnit}`,s.windSpeed.textContent=`${e.windSpeed} ${e.windUnit}`,s.humidity.textContent=`${e.humidity}%`,s.uv.textContent=e.uv,s.visibility.textContent=`${e.visibility} ${e.visibilityUnit}`,s.cloudCover.textContent=`${e.cloudCover}%`}const u=U(),v="185f9080f22643cd89d35208262001",h=document.querySelector("#suggestions"),_=document.querySelector("#weather-search");let f;function H(e){clearTimeout(f),f=setTimeout(()=>{const i=e.target?.value??"";if(i===""){h.replaceChildren(),suggestions.classList.remove("open");return}const c=k(v,i);console.log(c),y(c).then(o=>{if(console.log(o),h.replaceChildren(),o.length===0){suggestions.classList.remove("open");return}suggestions.classList.add("open"),o.forEach(n=>{const t=q(n);h.appendChild(t)})}).catch(o=>{console.error(o)})},500)}_.addEventListener("input",H);document.addEventListener("click",e=>{const i=e.target.closest(".suggestion-item"),c=h.contains(e.target),o=h.textContent.trim(),n=e.target.closest(".clickable");if(n&&!u.isEmpty()){const t=n.id;if(t==="toggle-temperature"){u.toggleTemperature();const{temperature:r,feelsLike:l,unit:a}=u.getTemperature();s.temperature.textContent=`${r}${a}`,s.feelsLike.textContent=`${l}${a}`;return}else if(t==="precipitation-toggle"){u.togglePrecipitation();const{value:r,unit:l}=u.getPrecipitation();s.precipitation.textContent=`${r} ${l}`;return}else if(t==="wind-speed-toggle"){u.toggleWind();const{value:r,unit:l}=u.getWind();s.windSpeed.textContent=`${r} ${l}`}else if(t=="visibility-toggle"){u.toggleVisibility();const{value:r,unit:l}=u.getVisibility();s.visibility.textContent=`${r} ${l}`}}if(e.target.id==="weather-search"&&o){suggestions.classList.add("open");return}if(i&&c){suggestions.classList.remove("open");const t=i.dataset.url,r=T(v,t);console.log(r),y(r).then(l=>{const a=P(l);u.setData(a),N(u.getFormatted())}).catch(l=>{console.error(l)});return}if(!c){suggestions.classList.remove("open");return}});
